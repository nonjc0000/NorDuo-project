@use '../variables/' as *;
@use '../functions/' as *;

.learning_wrap {
    width: $w-100;
    height: 100vh;
    position: relative;

    // 平板適配
    @media ($mediaMd) {
        min-height: 80vh;
        height: auto;
    }

    // 手機適配
    @media ($mediaSm) {
        height: auto;
        min-height: 120vh; // 給更多空間容納重排的內容
    }

    .bg_triangle {
        position: absolute;
        top: 0;
        right: -3rem;
        width: 99vw;
        height: 100vh;
        z-index: -1;

        // 平板適配：調整三角形位置
        @media ($mediaMd) {
            right: -2rem;
            height: 100%;
            min-height: 80vh;
        }

        // 手機適配：隱藏或簡化背景
        @media ($mediaSm) {
            right: -1rem;
            height: 100%;
            min-height: 120vh;
            opacity: 0.3; // 降低透明度避免干擾閱讀
        }

        polygon {
            fill: $gray-bg;
        }
    }
}

.learning_content_box {
    width: $w-100;
    height: 100%;
    padding: $spacing-xxxxl;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    z-index: 1;

    // 平板適配
    @media ($mediaMd) {
        padding: $spacing-xxl $spacing-xl;
        // min-height: 100vh;
        justify-content: flex-start;
        gap: $spacing-xl;
    }

    // 手機適配
    @media ($mediaSm) {
        padding: $spacing-xl $spacing-md;
        height: auto;
        min-height: 120vh;
        gap: $spacing-xxl;
    }

    .text_box {
        position: relative;
        width: 100%;
        height: 80%;

        // 平板適配
        @media ($mediaMd) {
            height: auto;
            margin-bottom: $spacing-xl;
        }

        // 手機適配
        @media ($mediaSm) {
            height: auto;
            margin-bottom: $spacing-xxl;
        }

        h1 {
            margin: $spacing-xxxl 0 80px;
            font-size: $f-s-display;
            font-weight: $f-w-r;
            letter-spacing: $letter-spacing-basic;
            color: $text;

            // 平板適配
            @media ($mediaMd) {
                margin: $spacing-xl 0 $spacing-xxl;
                font-size: $f-s-xxxxxl; // 2.5rem
                text-align: center;
            }

            // 手機適配
            @media ($mediaSm) {
                margin: $spacing-lg 0 $spacing-xl;
                font-size: $f-s-xxxl; // 2rem
                text-align: center;
                line-height: 1.2;
            }

            span {
                font-weight: $f-w-b;
                color: $accent;
            }
        }

        .desc_box {
            width: 35%;

            // 平板適配：增加寬度
            @media ($mediaMd) {
                width: 60%;
                margin: 0 auto; // 置中對齊
                text-align: center;
            }

            // 手機適配：全寬
            @media ($mediaSm) {
                width: 100%;
                text-align: center;
            }

            p {
                font-size: $f-s-lg;
                color: $text;
                margin-bottom: $spacing-xxl;
                @extend %line_height_letter_spacing;

                // 平板適配
                @media ($mediaMd) {
                    font-size: $f-s-md;
                    margin-bottom: $spacing-xl;
                }

                // 手機適配
                @media ($mediaSm) {
                    font-size: $f-s-sm;
                    margin-bottom: $spacing-lg;
                    
                    // 移除手動換行，讓文字自然流動
                    br {
                        display: none;
                    }
                }
            }
        }
    }
}

.card_box {
    display: flex;
    justify-content: flex-end;
    align-items: flex-end;
    gap: 5%;
    position: absolute;
    top: 55%;
    right: 0;
    width: 100%;
    height: min(80%, 48vh);
    max-height: 390px;

    // 平板適配：調整位置和佈局
    @media ($mediaMd) {
        position: relative; // 改為相對定位
        top: auto;
        right: auto;
        justify-content: center;
        align-items: center;
        height: auto;
        max-height: none;
        gap: $spacing-xl;
        margin-top: $spacing-xxl;
    }

    // 手機適配：改為縱向堆疊
    @media ($mediaSm) {
        flex-direction: column;
        gap: $spacing-lg;
        align-items: center;
        margin-top: $spacing-xl;
        width: 100%;
    }

    // 極小螢幕：進一步調整
    @media (max-width: 480px) {
        margin-top: $spacing-lg;
        gap: $spacing-md;
    }
}

.card1,
.card2 {
    position: relative;
    width: 30%;
    height: 100%;
    border-radius: $rad-basic;
    padding: $spacing-xl;
    cursor: pointer;
    transition: all 0.3s ease;
    overflow: hidden;

    // 平板適配
    @media ($mediaMd) {
        width: 45%; // 增加寬度
        height: 300px; // 固定高度
        min-height: 300px;
        max-width: 350px; // 限制最大寬度
    }

    // 手機適配
    @media ($mediaSm) {
        width: 90%; // 近乎全寬
        height: 250px;
        max-width: 400px;
        padding: $spacing-lg;
        
        // 確保觸控友好
        min-height: 200px;
    }

    // 極小螢幕
    @media (max-width: 480px) {
        width: 95%;
        height: 220px;
        padding: $spacing-md;
    }

    p {
        position: relative;
        z-index: 2;
        font-size: $f-s-xxl;
        font-weight: $f-w-r;
        @extend %line_height_letter_spacing;

        // 平板適配
        @media ($mediaMd) {
            font-size: $f-s-xl;
        }

        // 手機適配
        @media ($mediaSm) {
            font-size: $f-s-lg;
            line-height: 1.3;
        }

        // 極小螢幕
        @media (max-width: 480px) {
            font-size: $f-s-md;
        }
    }

    &:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba($accent, 0.2);

        // 手機適配：減少懸浮效果
        @media ($mediaSm) {
            transform: translateY(-5px);
        }
    }
}

.card1 {
    background: $white;
    @include bordered;

    p {
        color: $accent;
    }

    .card1_img {
        position: absolute;
        bottom: -45px;
        right: -30px;
        width: 85%;
        min-width: 260px;
        height: 85%;
        background-image: url('/images/Learning/card1_guitar.svg');
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        transition: all 0.3s ease;
        z-index: 1;

        // 平板適配：調整背景圖片
        @media ($mediaMd) {
            min-width: 200px;
            bottom: -35px;
            right: -20px;
            width: 80%;
        }

        // 手機適配：進一步調整
        @media ($mediaSm) {
            min-width: 180px;
            bottom: -25px;
            right: -15px;
            width: 75%;
            opacity: 0.8; // 稍微降低透明度避免干擾文字
        }

        // 極小螢幕
        @media (max-width: 480px) {
            min-width: 160px;
            bottom: -20px;
            right: -10px;
            width: 70%;
        }
    }

    &:hover .card1_img {
        transform: scale(1.1) rotate(5deg);

        // 手機適配：減少變形效果
        @media ($mediaSm) {
            transform: scale(1.05) rotate(3deg);
        }
    }
}

.card2 {
    background: $accent;

    p {
        color: $white;
    }

    .card2_img {
        position: absolute;
        bottom: -30px;
        right: -30px;
        width: 80%;
        min-width: 270px;
        height: 80%;
        background-image: url('/images/Learning/card2_note.svg');
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        transition: all 0.3s ease;
        z-index: 1;

        // 平板適配
        @media ($mediaMd) {
            min-width: 210px;
            bottom: -25px;
            right: -20px;
            width: 75%;
        }

        // 手機適配
        @media ($mediaSm) {
            min-width: 190px;
            bottom: -20px;
            right: -15px;
            width: 70%;
            opacity: 0.8;
        }

        // 極小螢幕
        @media (max-width: 480px) {
            min-width: 170px;
            bottom: -15px;
            right: -10px;
            width: 65%;
        }
    }

    &:hover .card2_img {
        transform: scale(1.1) rotate(-5deg);

        // 手機適配
        @media ($mediaSm) {
            transform: scale(1.05) rotate(-3deg);
        }
    }
}